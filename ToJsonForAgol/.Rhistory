if(nrow(ECDC_HospRaw_ctr)==2 & (ECDC_HospRaw_ctr$date[1]-ECDC_HospRaw_ctr$date[2]==7)){
maxDateECDC<-max(ECDC_HospRaw_ctr$date)
HospRate_ECDC<-(ECDC_HospRaw_ctr$value[1]+ECDC_HospRaw_ctr$value[2])/2
HospRate_ECDC<-round(HospRate_ECDC,1)
} else {
maxDateECDC<-NA
HospRate_ECDC<-NA
}
HospRate_ECDC
TESSy_HospRaw_ctr$date[1]
ECDC_HospRaw_ctr$date[1]
ECDC_HospRaw_ctr$date[2]
library(dplyr)
library(WHOCountryNames)
library(httr)
library(ISOweek)
library(GetPopulationNew)
### Access to agol portal
user <- "EURO_DevOps"
pwd <- "@utomat!0N47"
url <- "https://www.arcgis.com/sharing/rest/generateToken"
params <- list(username = user,
password = pwd,
referer = "http://www.arcgis.com",
f = "json")
r <- POST(url, body = params)
token <- content(r)$token
folderRaw <- "2d5fb83bc812444b9c91cf07f2c97225"
folderProcessed<-'336f0d4c8c7b44c3aa8fc90c2a801d91'
Population<-GetPopulationNew() %>% select(ADM0_NAME,Population) %>% WHOCountryNames(ADM0_NAME)
Population_UKNations<-data.frame('ADM0_NAME'=c('England','Scotland','Northern Ireland','Wales'),
'Population'=c(56171302,5454238,1875957,3136383))
Population<-rbind(Population,Population_UKNations)
TESSy_HospRaw<-read.csv(paste0('https://arcgis.com/sharing/rest/content/items/6ec649a8108c4a0f917f7b16c1a3d4fb/data?token=',token),encoding='UTF-8') %>%
WHOCountryNames(CountryName) %>%
mutate(CountryName=case_when(DataSource=='UK-NI_NCOV-AGGR'~'Northern Ireland',
DataSource=='UK-ENG_NCOV-AGGR'~'England',
DataSource=='UK-SCOT_NCOV-AGGR'~'Scotland',
DataSource=='UK-WALES_NCOV-AGGR'~'Wales',
!(DataSource %in% c('UK-WALES_NCOV-AGGR',
'UK-SCOT_NCOV-AGGR',
'UK-ENG_NCOV-AGGR',
'UK-ENG_NCOV-AGGR'))~ CountryName)) %>%
select(CountryName,Hospitalised,Ventilated,DateUsedForStatisticsISO) %>%
mutate(date=ISOweek2date(paste0(DateUsedForStatisticsISO,'-7'))) %>%
filter(!is.na(Hospitalised))
ECDC_HospRaw<-read.csv(paste0('https://arcgis.com/sharing/rest/content/items/fa503e904eb64d4bbe15407a65a639f6/data','?token=',token),encoding = "UTF-8") %>%
mutate(date=as.Date(date)) %>%
WHOCountryNames(country) %>%
filter(indicator=='Weekly new hospital admissions per 100k') %>%
select(country,indicator,date,value) %>%
filter(!is.na(value))
HospRate<-function(ctr){
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(TESSy_HospRaw_ctr$date[1]-Sys.Date())>30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
ECDC_HospRaw_ctr<-ECDC_HospRaw %>%
filter(country==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(ECDC_HospRaw_ctr)==2 &
(ECDC_HospRaw_ctr$date[1]-ECDC_HospRaw_ctr$date[2]==7) &
(ECDC_HospRaw_ctr$date[1]-Sys.Date())>30){
maxDateECDC<-max(ECDC_HospRaw_ctr$date)
HospRate_ECDC<-(ECDC_HospRaw_ctr$value[1]+ECDC_HospRaw_ctr$value[2])/2
HospRate_ECDC<-round(HospRate_ECDC,1)
} else {
maxDateECDC<-NA
HospRate_ECDC<-NA
}
if (!is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
if(maxDateTessy>=maxDateECDC){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
}
} else if (is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
} else if (!is.na(HospRate_TESSy) & is.na(HospRate_ECDC)){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-NA
Source<-NA
Url<-NA
Date<-NA
}
return(list(HospRate=HospRate,Source=Source,Url=Url,Date=as.Date(Date)))
}
HospRate_df<-data.frame()
for (ctr in unique(Population$ADM0_NAME)){
data<-data.frame(Country=ctr,
HospRate=HospRate(ctr)$HospRate,
Source=HospRate(ctr)$Source,
Url=HospRate(ctr)$Url,
Date=HospRate(ctr)$Date)
HospRate_df<-rbind(HospRate_df,data)
}
HospRate('Croatia')
library(dplyr)
library(WHOCountryNames)
library(httr)
library(ISOweek)
library(GetPopulationNew)
### Access to agol portal
user <- "EURO_DevOps"
pwd <- "@utomat!0N47"
url <- "https://www.arcgis.com/sharing/rest/generateToken"
params <- list(username = user,
password = pwd,
referer = "http://www.arcgis.com",
f = "json")
r <- POST(url, body = params)
token <- content(r)$token
folderRaw <- "2d5fb83bc812444b9c91cf07f2c97225"
folderProcessed<-'336f0d4c8c7b44c3aa8fc90c2a801d91'
Population<-GetPopulationNew() %>% select(ADM0_NAME,Population) %>% WHOCountryNames(ADM0_NAME)
Population_UKNations<-data.frame('ADM0_NAME'=c('England','Scotland','Northern Ireland','Wales'),
'Population'=c(56171302,5454238,1875957,3136383))
Population<-rbind(Population,Population_UKNations)
TESSy_HospRaw<-read.csv(paste0('https://arcgis.com/sharing/rest/content/items/6ec649a8108c4a0f917f7b16c1a3d4fb/data?token=',token),encoding='UTF-8') %>%
WHOCountryNames(CountryName) %>%
mutate(CountryName=case_when(DataSource=='UK-NI_NCOV-AGGR'~'Northern Ireland',
DataSource=='UK-ENG_NCOV-AGGR'~'England',
DataSource=='UK-SCOT_NCOV-AGGR'~'Scotland',
DataSource=='UK-WALES_NCOV-AGGR'~'Wales',
!(DataSource %in% c('UK-WALES_NCOV-AGGR',
'UK-SCOT_NCOV-AGGR',
'UK-ENG_NCOV-AGGR',
'UK-ENG_NCOV-AGGR'))~ CountryName)) %>%
select(CountryName,Hospitalised,Ventilated,DateUsedForStatisticsISO) %>%
mutate(date=ISOweek2date(paste0(DateUsedForStatisticsISO,'-7'))) %>%
filter(!is.na(Hospitalised))
ECDC_HospRaw<-read.csv(paste0('https://arcgis.com/sharing/rest/content/items/fa503e904eb64d4bbe15407a65a639f6/data','?token=',token),encoding = "UTF-8") %>%
mutate(date=as.Date(date)) %>%
WHOCountryNames(country) %>%
filter(indicator=='Weekly new hospital admissions per 100k') %>%
select(country,indicator,date,value) %>%
filter(!is.na(value))
HospRate<-function(ctr){
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(TESSy_HospRaw_ctr$date[1]-Sys.Date())<=30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
ECDC_HospRaw_ctr<-ECDC_HospRaw %>%
filter(country==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(ECDC_HospRaw_ctr)==2 &
(ECDC_HospRaw_ctr$date[1]-ECDC_HospRaw_ctr$date[2]==7) &
(ECDC_HospRaw_ctr$date[1]-Sys.Date())<=30){
maxDateECDC<-max(ECDC_HospRaw_ctr$date)
HospRate_ECDC<-(ECDC_HospRaw_ctr$value[1]+ECDC_HospRaw_ctr$value[2])/2
HospRate_ECDC<-round(HospRate_ECDC,1)
} else {
maxDateECDC<-NA
HospRate_ECDC<-NA
}
if (!is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
if(maxDateTessy>=maxDateECDC){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
}
} else if (is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
} else if (!is.na(HospRate_TESSy) & is.na(HospRate_ECDC)){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-NA
Source<-NA
Url<-NA
Date<-NA
}
return(list(HospRate=HospRate,Source=Source,Url=Url,Date=as.Date(Date)))
}
HospRate_df<-data.frame()
for (ctr in unique(Population$ADM0_NAME)){
data<-data.frame(Country=ctr,
HospRate=HospRate(ctr)$HospRate,
Source=HospRate(ctr)$Source,
Url=HospRate(ctr)$Url,
Date=HospRate(ctr)$Date)
HospRate_df<-rbind(HospRate_df,data)
}
ctr<-'Azerbaijan'
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(TESSy_HospRaw_ctr$date[1]-Sys.Date())<=30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
HospRate_TESSy
TESSy_HospRaw_ctr$date[1]-Sys.Date()
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(TESSy_HospRaw_ctr$date[1]-Sys.Date())<=(-30)){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(Sys.Date()-TESSy_HospRaw_ctr$date[1])<=30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
Sys.Date()-ECDC_HospRaw_ctr$date[1]
HospRate<-function(ctr){
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(Sys.Date()-TESSy_HospRaw_ctr$date[1])<=30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
ECDC_HospRaw_ctr<-ECDC_HospRaw %>%
filter(country==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(ECDC_HospRaw_ctr)==2 &
(ECDC_HospRaw_ctr$date[1]-ECDC_HospRaw_ctr$date[2]==7) &
(Sys.Date()-ECDC_HospRaw_ctr$date[1]<=30){
maxDateECDC<-max(ECDC_HospRaw_ctr$date)
HospRate_ECDC<-(ECDC_HospRaw_ctr$value[1]+ECDC_HospRaw_ctr$value[2])/2
HospRate_ECDC<-round(HospRate_ECDC,1)
} else {
maxDateECDC<-NA
HospRate_ECDC<-NA
}
if (!is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
if(maxDateTessy>=maxDateECDC){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
}
} else if (is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
} else if (!is.na(HospRate_TESSy) & is.na(HospRate_ECDC)){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-NA
Source<-NA
Url<-NA
Date<-NA
}
return(list(HospRate=HospRate,Source=Source,Url=Url,Date=as.Date(Date)))
}
HospRate_df<-data.frame()
for (ctr in unique(Population$ADM0_NAME)){
data<-data.frame(Country=ctr,
HospRate=HospRate(ctr)$HospRate,
Source=HospRate(ctr)$Source,
Url=HospRate(ctr)$Url,
Date=HospRate(ctr)$Date)
HospRate_df<-rbind(HospRate_df,data)
}
HospRate<-function(ctr){
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(Sys.Date()-TESSy_HospRaw_ctr$date[1])<=30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
ECDC_HospRaw_ctr<-ECDC_HospRaw %>%
filter(country==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(ECDC_HospRaw_ctr)==2 &
(ECDC_HospRaw_ctr$date[1]-ECDC_HospRaw_ctr$date[2]==7) &
(Sys.Date()-ECDC_HospRaw_ctr$date[1]<=30){
maxDateECDC<-max(ECDC_HospRaw_ctr$date)
HospRate_ECDC<-(ECDC_HospRaw_ctr$value[1]+ECDC_HospRaw_ctr$value[2])/2
HospRate_ECDC<-round(HospRate_ECDC,1)
} else {
maxDateECDC<-NA
HospRate_ECDC<-NA
}
if (!is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
if(maxDateTessy>=maxDateECDC){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
}
} else if (is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
} else if (!is.na(HospRate_TESSy) & is.na(HospRate_ECDC)){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-NA
Source<-NA
Url<-NA
Date<-NA
}
return(list(HospRate=HospRate,Source=Source,Url=Url,Date=as.Date(Date)))
}
HospRate_df<-data.frame()
for (ctr in unique(Population$ADM0_NAME)){
data<-data.frame(Country=ctr,
HospRate=HospRate(ctr)$HospRate,
Source=HospRate(ctr)$Source,
Url=HospRate(ctr)$Url,
Date=HospRate(ctr)$Date)
HospRate_df<-rbind(HospRate_df,data)
}
ctr
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(Sys.Date()-TESSy_HospRaw_ctr$date[1])<=30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
ECDC_HospRaw_ctr<-ECDC_HospRaw %>%
filter(country==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(ECDC_HospRaw_ctr)==2 &
(ECDC_HospRaw_ctr$date[1]-ECDC_HospRaw_ctr$date[2]==7) &
(Sys.Date()-ECDC_HospRaw_ctr$date[1]<=30){
maxDateECDC<-max(ECDC_HospRaw_ctr$date)
HospRate_ECDC<-(ECDC_HospRaw_ctr$value[1]+ECDC_HospRaw_ctr$value[2])/2
HospRate_ECDC<-round(HospRate_ECDC,1)
} else {
maxDateECDC<-NA
HospRate_ECDC<-NA
}
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
HospRate<-function(ctr){
Population_ctr<-(Population %>% filter(ADM0_NAME==ctr))$Population
TESSy_HospRaw_ctr<-TESSy_HospRaw %>%
filter(CountryName==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(TESSy_HospRaw_ctr)==2 &
(TESSy_HospRaw_ctr$date[1]-TESSy_HospRaw_ctr$date[2]==7) &
(Sys.Date()-TESSy_HospRaw_ctr$date[1])<=30){
maxDateTessy<-max(TESSy_HospRaw_ctr$date)
HospRate_TESSy<-(TESSy_HospRaw_ctr$Hospitalised[1]+TESSy_HospRaw_ctr$Hospitalised[2])/(2*Population_ctr)*100000
HospRate_TESSy<-round(HospRate_TESSy,1)
} else {
maxDateTessy<-NA
HospRate_TESSy<-NA
}
ECDC_HospRaw_ctr<-ECDC_HospRaw %>%
filter(country==ctr) %>%
arrange(desc(date)) %>% top_n(2,date)
if(nrow(ECDC_HospRaw_ctr)==2 &
(ECDC_HospRaw_ctr$date[1]-ECDC_HospRaw_ctr$date[2]==7) &
(Sys.Date()-ECDC_HospRaw_ctr$date[1]<=30)){
maxDateECDC<-max(ECDC_HospRaw_ctr$date)
HospRate_ECDC<-(ECDC_HospRaw_ctr$value[1]+ECDC_HospRaw_ctr$value[2])/2
HospRate_ECDC<-round(HospRate_ECDC,1)
} else {
maxDateECDC<-NA
HospRate_ECDC<-NA
}
if (!is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
if(maxDateTessy>=maxDateECDC){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
}
} else if (is.na(HospRate_TESSy) & !is.na(HospRate_ECDC)){
HospRate<-HospRate_ECDC
Source<-'ECDC'
Url<-'https://www.ecdc.europa.eu/en/covid-19/data'
Date<-maxDateECDC
} else if (!is.na(HospRate_TESSy) & is.na(HospRate_ECDC)){
HospRate<-HospRate_TESSy
Source<-'TESSy'
Url<-'https://worldhealthorg.shinyapps.io/euro-covid19/'
Date<-maxDateTessy
} else {
HospRate<-NA
Source<-NA
Url<-NA
Date<-NA
}
return(list(HospRate=HospRate,Source=Source,Url=Url,Date=as.Date(Date)))
}
HospRate_df<-data.frame()
for (ctr in unique(Population$ADM0_NAME)){
data<-data.frame(Country=ctr,
HospRate=HospRate(ctr)$HospRate,
Source=HospRate(ctr)$Source,
Url=HospRate(ctr)$Url,
Date=HospRate(ctr)$Date)
HospRate_df<-rbind(HospRate_df,data)
}
shiny::runApp('C:/Users/celin/Desktop/Github/EUROHIM/CalibrationTool_Version2')
shiny::runApp('C:/Users/celin/Desktop/Github/EUROHIM/CalibrationTool_Version2')
shiny::runApp('C:/Users/celin/Desktop/Github/EUROHIM/CalibrationTool_Version2')
library(devtools)
library(roxygen2)
usethis::create_package('ToJson')
library(devtools)
getwd()
setwd('C:/Users/celin/Desktop/Github/EURO-ECDC/Packages/ToJsonForAgol')
document()
